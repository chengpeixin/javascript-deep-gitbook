# 编译原理

Hello！你好!欢迎你这里学习！在这里，我们以一道面试题作为学习的开端。

这道面试题是这样的: 请你解释下面的这行代码。
```javascript
var name = "jack"
```

不要怀疑，这是真的面试题，而且我当初还碰到了！当时我的心里有一万条草泥马跑过，这他妈的是什么题？这能是什么？这不就是声明变量加赋值吗！这个沙雕面试官...
面试后在面试后我厚着脸皮问了一下，面试官说是在考察我编译原理和作用域相关的知识。

面试后我在`你不知道的JavaScript`中找到了这一块的知识点，所以在这里整理出来。

下面，跟着我乘坐哆啦A梦的口袋，进入到编译原理的世界来吧！

-----

### 传统语言的编译过程

我们先认识一下传统编程语言（这是所说的传统编程语言为C、C艹）的编译流程，程序的代码在执行前一般情况下会有三个步骤。

#### 第一步
分词/词法分析(Tokenizing/Lexing)

在这个过程中，会把你的代码当作**字符串**分解为**有意义的代码块**,这些代码块就被称为`词法单元(token)`。
举个栗子:
```javascript
var a = 1;
```
这个程序通常分解为[var，a，=，1，;]。


而空格是否会当作`词法单元`则取决于空格在程序中有没有特殊的意义。比如`python`靠缩进来控制代码的执行。

#### 第二步
解析/语法分析(Parsing)

这个过程是将`词法单元`转换为一个逐级嵌套的语法树。这个树会被称为"**抽象语法书**"(Abstract Syntax Tree,AST)。

举个栗子:
```javascript
var a = 1
```
在`var a = 1`的抽象语法树中会有一个叫做`VariableDeclaration`的顶级节点，接下来是一个叫做`Identifier`的子节点，还有一个叫做`init`的子节点，在`init`里面则有一个叫做`value`的子节点，它的值为`1`。

如果上面的的你看不懂的话没关系，实际上我看着也非常绕，特别是我的书写的能力不太好，所以我在下面放了一段代码，让你看个清晰！

```JSON
{
    "type": "Program",
    "body": [
        {
            "type": "VariableDeclaration",
            "declarations": [
                {
                    "type": "VariableDeclarator",
                    "id": {
                        "type": "Identifier",
                        "name": "a"
                    },
                    "init": {
                        "type": "Literal",
                        "value": 1,
                        "raw": "1"
                    }
                }
            ],
            "kind": "var"
        }
    ],
    "sourceType": "script"
}
```

这时候，在把AST转换为可执行代码的过程叫做代码生成。这个过程和语言、目标平台是有关系的。

先放开细节，简单来说就是有一种方法，能把`var a = 1`的AST转化为机器指令，用来创建变量、分配内存、分配值等等...